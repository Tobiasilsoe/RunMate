<!doctype html>
<html class="no-js" lang="zxx">

<head>
    <meta charset="utf-8">
    <meta name="author" content="John Doe">
    <meta name="description" content="">
    <meta name="keywords" content="HTML,CSS,XML,JavaScript">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Title -->
    <title>Home</title>
    <!-- Place favicon.ico in the root directory -->
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="shortcut icon" type="image/ico" href="images/favicon.ico" />
    <!-- Plugin-CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/themify-icons.css">
    <link rel="stylesheet" href="css/magnific-popup.css">
    <link rel="stylesheet" href="css/animate.css">
    <!-- Main-Stylesheets -->
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="css/responsive.css">
    <script src="js/vendor/modernizr-2.8.3.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="//oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body data-spy="scroll" data-target="#primary-menu">

    <div class="preloader">
        <div class="sk-folding-cube">
            <div class="sk-cube1 sk-cube"></div>
            <div class="sk-cube2 sk-cube"></div>
            <div class="sk-cube4 sk-cube"></div>
            <div class="sk-cube3 sk-cube"></div>
        </div>
    </div>
    <!--Mainmenu-area-->
    <div class="mainmenu-area" data-spy="affix" data-offset-top="100">
        <div class="container">
            <!--Logo-->
            
            <div class="navbar-header">
                
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#primary-menu">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                 
                <a href="#" class="navbar-brand logo">
                   
                 
                    <h2>Runmate</h2>
                    
                </a>
                <img src="../runMate/images/runningManRediHvid.PNG" class="logoHjornet">
            </div>
            <!--Logo/-->
            <nav class="collapse navbar-collapse" id="primary-menu">
                <ul class="nav navbar-nav navbar-right">
                    <li class="active"><a href="#home-page">Indset Data</a></li>
                    <li><a href="#map-page">Tegn din rute</a></li>
                    <li><a href="#graph-page">Mine Data</a></li>
                    <li id="laererKnap"><a href="#price-page">Lærerknap</a></li>
                     <!-- burde i teorien laves så den ikke henviser til "price-page" men til en ekstern lærerside-->
                    <li><a href="RunMate-Spil/RunMate.apk" download>Download VR-spil</a></li>
                    <li><a href="login.html" onclick="LogUd()">Log ud</a></li>
                   
                </ul>
            </nav>
        </div>
    </div>
    <!--Mainmenu-area/-->



    <!--Header-area-->
    <header class="header-area overlay full-height relative v-center" id="home-page">
        <div class="absolute anlge-bg"></div>
        <div class="container">
            <div class="aktivitetsForm">
                <!--<form action="process.php" id="contact-form" method="post" class="contact-form">-->
                <form id="aktivitetsForm">
                    <p class="formOverskrift">Indsæt din data</p>
                    <div class="col-xs-12 col-sm-12 col-md-12 col-sm-offset-0 col-md-offset-0" align="center">
                        <select class="sortTekst" name="aktivitetstype" id="aktivitetstype">
                                <option value="gang" selected="selected">Gang</option>
                                <option value="lob">Løb</option>
                                <option value="cykel">Cykle</option>
                        </select>
                        <input class="sortTekst" name="distance" id="distance" placeholder="distance i km" type="number" step="any">
                        
                    </div>
                    
                    <div class="col-xs-12 col-sm-offset-0" align="center">
                        <br>
                        <button type="submit" class="button">Submit</button>
                    </div>
                </form>
            </div>
        </div>
    </header>
    <!--Header-area/-->
    
     <!--Map-area-->
    <section class="gray-bg section-padding" id="map-page">
       <div class="col-xs-12 col-sm-offset-0" align="center">
        <span id="ruteLengde">Tryk på kortet for at lave din Rute. Rutens længde er: 0 km </span>
        <div id="map"></div>
        </div>
    </section>
    
        <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 450px;
          width: 90%;
          
      }
            #ruteLengde{
                color: #159cc4;
                font-family: 'Poppins', sans-serif;
                font-weight: 500;
                font-size: 30px;
                line-height: 3;
            }
    </style>
    
    <script src="https://maps.googleapis.com/maps/api/js?">
    </script>	
  
   
    <script>
var map, polyline, markers = new Array();

function initMap() {

    var mapOptions = {
        zoom: 12,
        center: new google.maps.LatLng(55.401520, 10.386518),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    map = new google.maps.Map(document.getElementById('map'),
    mapOptions);

    polyline = new google.maps.Polyline({
        strokeColor: 'red',
        strokeWeight: 1,
        map: map
    });

    google.maps.event.addListener(map, 'click', function (event) {

        addPoint(event.latLng);
    });
     //Defining OSM Map Type
					var osmMapType = new google.maps.ImageMapType({
   			         	getTileUrl: function(coord, zoom) {
                    		return "http://tile.openstreetmap.org/" + zoom + "/" + coord.x + "/" + coord.y + ".png";
                		},
                		tileSize: new google.maps.Size(256, 256),
                		name: "OpenStreetMap",
                		maxZoom: 18
            		});
            		
            		//relate new mapTypeId to the ImageMapType - osmMapType object
					map.mapTypes.set('OSM', osmMapType);
					
					//set this new mapTypeId to be displayed
					map.setMapTypeId('OSM');   
          
}

function removePoint(marker) {

    for (var i = 0; i < markers.length; i++) {

        if (markers[i] === marker) {

            markers[i].setMap(null);
            markers.splice(i, 1);

            polyline.getPath().removeAt(i);
            updateLength();
        }
    }
}

function addPoint(latlng) {

    var marker = new google.maps.Marker({
        position: latlng,
        map: map
    });

    markers.push(marker);

    polyline.getPath().setAt(markers.length - 1, latlng);
        updateLength();

    google.maps.event.addListener(marker, 'click', function (event) {
        removePoint(marker);
    });
}
        
    function updateLength() {
        
        var path = polyline.getPath();
          
        var length = google.maps.geometry.spherical.computeLength(path);
        console.log(length);
            
        length=Math.round(length);
         console.log(length+"hi");
                //print the length
			$("#ruteLengde").text("Rutens længde er: " + length/1000+ " km "); 

        };
      

initMap();	

    </script>

    <!--chart-area-->
    <section class="gray-bg section-padding" id="graph-page">
        <div class="container">
            <div class="row">
                <div class="col-xs-12 col-sm-6">
                    <div id="chart_div5">
                    </div>
                </div>
                <div class="col-xs-12 col-sm-6">
                    <div id="chart_div6">
                    </div>
                </div>
                
            </div>
            <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-offset-2">
                    <div id="chart_div">
                    </div>
                </div>
            </div>
        </div>
    </section>

   
    <!--Scripts-->
    
    <script src="js/googleGraphs.js"></script>
    <!--Vendor-JS-->
    <script src="js/vendor/jquery-1.12.4.min.js"></script>
    <script src="js/vendor/bootstrap.min.js"></script>
    <!--Plugin-JS-->
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/contact-form.js"></script>
    <script src="js/jquery.parallax-1.1.3.js"></script>
    <script src="js/scrollUp.min.js"></script>
    <script src="js/magnific-popup.min.js"></script>
    <script src="js/wow.min.js"></script>
    <!--Main-active-JS-->
    <script src="js/main.js"></script>
    <script>
        
        function LogUd(){
            localStorage.removeItem('user');
            localStorage.removeItem('laere');
            
        }
        
document.getElementById('aktivitetsForm').addEventListener("submit", function(e) {
            e.preventDefault(); // before the code

            /* do what you want with the form */
            // ajax call 
            $.ajax({
                type: "POST",
                url: "http://localhost:7000/aktivitetstype/"+localStorage.getItem("user")+'/'+ $('#aktivitetstype').val() + '/' + $('#distance').val(),
                // serialized fields from the form ... 
                //data: $("#theForm").serialize(), 
                success: function(data) {
                    console.log(data);
                    alert("Sejt gået, dataen er indsendt");
                    $('#distance').val("");
                    
                },
                error: function(data) {
                    console.log("error!");
                },
            });

            // Should be triggered on form submit
            console.log('submitting...');
        });
        $(document).ready(function () {
        if(localStorage.getItem("laere")!=0){
         $('#laererKnap').show();
         console.log("show");
          }else{
        $('#laererKnap').hide();
          console.log("hide");
          }
        });

    </script>
</body>

</html>
